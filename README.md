
Задачи: 
1. Натренировать существо в синг моде, максимизировать продолжительность жизни. После визуализировать это в визуалайзере. 
2. Сделать так чтоб за тренировкой одного существа можно было наблюдать. 
-----I AM here ----
3. Пункт 2 только множество существ одновременно. Проработать вопрос размножения, расширения observation и action_space 
4. Добавить хищников. Сделать им другие movements и другие observation.
5. Оттренировать отдельного хищника в синг моде и визуализировать. Тоже самое что с травоядными, только травоядное уже натренировано. 
6. Запустить в визуализации оттренированого хищника и пару травоядных, посмотреть что будет. 
7. Тренировка хищников и травоядных одновременно. 
8. Визуализация тренировки хищников и травоядных одновременно
9. Вживить память, не ограничиваться тем что сущность видит в текущий момент, запоминать что она видела до этого.


4. переопределить PreyEnv и сделать метод рендер активным через композицию, для того чтоб не рендерить реализовать пустой класс
6. реализовать командную строку 
7. написать ридми 


Вопросы: 
1. как делать ресурекшен? 

Проблемы: 
1. Модель 16х16_50000 застревает внизу слева в самой нижней левой координате, разобраться почему, возможно лаг в 
окружении потому что я вижу ходы модели, но ничего не происходит. проблема только при использовании evaluate_policy, 
попробовать подебажить потом 

На чем остановился: столкнулся с серьезной проблемой того что не получается масштабировать в процессе обучения количество сущностей
Проблема в том что окружение оборачивается в вектор, который копирует observation_space и action_space на момент инициализации. 
Если окружение в процессе обчения меняет свое свойство - в вектор обертке оно остается старым. 
Более того проблема еще глубже. При смене окружений в визуализации обучений (где у нас есть окружение для рендеринга и окружение для обучения) 
оба окружения могут развиваться по своему и иметь разные obs/act space. И в модель нельзя свитчить окружение на то в котором obs/act space разные. 
То есть визуализируем с одной сущностью, в обучении появилось две, при свитче окружения в модели обратно на то где одна сущность - ошибка. 
Надо решить проблему того как будет обучаться сущность в фоне либо как делать визуализацию обучения когда сущности впринципе плодятся: 
1. Возможно стоит посмотреть в сторону https://stable-baselines3.readthedocs.io/en/master/modules/ppo.html#stable_baselines3.ppo.PPO.get_parameters и такое 
же set_parameters. Насколько понял это копирование весов модели из одной в другую. Возможно это поможет. Также с помощью этой штуки делается 
наследственность с помощью ноиза. Посмотреть туда после подробнее. 
2. Чат джипити предложил реализовать свою обертку для вектора, чтоб в процессе обучения обертка не создавалась сама и тем самым не происходило копирование 
динамически меняющихся вещей. Самый просто вариант просто унаследоваться от DummyVec и все. Более сложный вариант когда реально сделаем рабочую обертку. 
3. Выявить все места где происходит копирование старых obs/act space и при смене окружения фиксить их. Но проблема того что когда с тренировчного 
окружения свитч будет обратно на окружение для визуализации - остается. Возможно стоит выявить стратегию фонового обучения, выявить оптимальное соотношение 
хищников/травоядных и их характеристики. 
4. Посмотреть в сторону множества моделей одну на каждую сущность в отдельности. Самый энергоемкий режим, тем не менее самый правильный.
В текущей реализации у нас есть глобальный разум для травоядных и глобальный для хищников. 



Новое решение с множеством сущностей: 
1. Переходим в режим где сущность опрашивается окружением. Причем каждой сущности инитим модель РРО. 
2. Предусмотреть в переводчике окружений момент когда травоядные видят других травоядных (или скорее None) просто 
говорим что в ту область ходить нельзя.
3. уменьшить количество батчей в одной цикле обучения с 2000 до 100, если надо то сделать патч либы, возможно вынести 
эту переменную в сетап какой то, где будет настройки количества шагов обучения после каждого успешного шага
4. На каждом степе сущность обучается 1 цикл. Сущность имеет ссылку на енв. Сущность обучается в тех же условиях 
(количество еды, хищников и травоядных) в котором щас находится енв. 
5. Реализовать рождение. Помимо опроса сущностей о следующем ходе окружение будет опрашивать травоядных о рождении. 
При рождении уменьшается health. Сделать параметром при ините порог при котором происходит рождение. При рождении 
ворачивается новая модель, сущность мозга, которая имеет веса родительской модели, и окружение инитит новую сущность 
рандомно рядом с родителем. После они начиают существовать вместе. 
